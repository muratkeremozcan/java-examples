#!/bin/sh
# Pre-commit hook for Java project
# This hook runs automatically before each commit

echo "üîç Running pre-commit quality checks..."

# Run auto-fixes first
echo "1Ô∏è‚É£  Auto-fixing code quality issues..."
make fix
if [ $? -ne 0 ]; then
    echo "‚ùå Auto-fix failed. Please check the output above."
    exit 1
fi

# Run full validation
echo "2Ô∏è‚É£  Running full validation..."
make precommit
if [ $? -ne 0 ]; then
    echo "‚ùå Pre-commit validation failed. Please fix the issues above and try again."
    echo "üí° You can run 'make lint-verbose' to see detailed violation information."
    exit 1
fi

echo "‚úÖ All pre-commit checks passed! Proceeding with commit..."
exit 0
